(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{238:function(e,r,n){"use strict";var t=n(1664),i=n.n(t),s=n(3144),c=n(5893);r.Z=function(e){var r=e.step1,n=e.step2,t=e.step3,d=e.step4;return(0,c.jsxs)(s.Z,{className:"justify-content-center  mb-4",children:[(0,c.jsx)(s.Z.Item,{children:r?(0,c.jsx)(i(),{href:"/login",passHref:!0,children:(0,c.jsx)(s.Z.Link,{children:"Sign In"})}):(0,c.jsx)(s.Z.Link,{disabled:!0,children:"Sign In"})}),(0,c.jsx)(s.Z.Item,{children:n?(0,c.jsx)(i(),{href:"/shipping",passHref:!0,children:(0,c.jsx)(s.Z.Link,{children:"Shipping"})}):(0,c.jsx)(s.Z.Link,{disabled:!0,children:"Shipping"})}),(0,c.jsx)(s.Z.Item,{children:t?(0,c.jsx)(i(),{href:"/payment",passHref:!0,children:(0,c.jsx)(s.Z.Link,{children:"Payment"})}):(0,c.jsx)(s.Z.Link,{disabled:!0,children:"Payment"})}),(0,c.jsx)(s.Z.Item,{children:d?(0,c.jsx)(i(),{href:"/placeorder",passHref:!0,children:(0,c.jsx)(s.Z.Link,{children:"Place Order"})}):(0,c.jsx)(s.Z.Link,{disabled:!0,children:"Place Order"})})]})}},5348:function(e,r,n){"use strict";n(7294);var t=n(8375),i=n(5893);r.Z=function(e){return(0,i.jsx)(t.Z,{variant:e.varient,children:e.children})}},9073:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return O},default:function(){return P}});var t=n(9008),i=n(1163),s=n(7294),c=n(682),d=n(2185),l=n(29),a=n(6835),u=n(7794),o=n.n(u),h=n(1608),x=n(1555),f=n(8695),j=n(1330),p=n(8182),m=n(5005),Z=n(1664),v=n.n(Z),y=n(238),g=n(5348),I=n(8892),b=n(3139),S=n(3299),k=n(4749),N=n(5893),_=function(){var e,r=(0,d.I0)(),n=(0,i.useRouter)();(0,s.useEffect)((function(){var e=localStorage.getItem("shippingAddress"),n=JSON.parse(localStorage.getItem("cartItems")||"[]");e&&n.length>0&&(r((0,k.Al)(JSON.parse(e))),r((0,k.bJ)(n)))}),[]);var t=(0,d.v9)((function(e){return e.cart})),u=t.cartItems,Z=t.shippingAddress,_=t.paymentMethod,O=(0,I.kD)(),P=(0,a.Z)(O,2),w=P[0],A=P[1],E=(A.isLoading,A.isError,A.error),L=null===(e=(0,S.useSession)().data)||void 0===e?void 0:e.accessToken,$=function(e){return Number((Math.round(100*e)/100).toFixed(2))},C=$(u.reduce((function(e,r){return e+r.price*r.qty}),0)),M=$(Number(.15*Number(C))),T=$(C>0?0:100),q=Number((Number(C)+Number(T)+Number(M)).toFixed(2)),H=(0,d.v9)((function(e){return e.order})),F=(H.currentOrder,H.success,H.loading,u.map((function(e){return{productId:e.productId,qty:e.qty,price:e.price,name:e.name,image:e.image}}))),J=function(){var e=(0,l.Z)(o().mark((function e(t){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!_||!L){e.next=6;break}return e.next=4,w({orderItems:F,shippingAddress:Z,paymentMethod:_,itemsPrice:C,shippingPrice:T,taxPrice:M,totalPrice:q,token:L,isPaid:!1});case 4:"data"in(i=e.sent)&&(r((0,b.OL)(i.data)),n.push("/orders/".concat(i.data._id)));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(y.Z,{step1:!0,step2:!0,step3:!0,step4:!0}),(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{md:8,children:(0,N.jsxs)(f.Z,{variant:"flush",children:[(0,N.jsxs)(f.Z.Item,{children:[(0,N.jsx)("h2",{children:"Shipping"}),(0,N.jsxs)("p",{children:[(0,N.jsx)("strong",{children:"Address : "}),null===Z||void 0===Z?void 0:Z.address,", ",null===Z||void 0===Z?void 0:Z.city," ",null===Z||void 0===Z?void 0:Z.postalCode,", ",null===Z||void 0===Z?void 0:Z.country]})]}),(0,N.jsxs)(f.Z.Item,{children:[(0,N.jsx)("h2",{children:"Payment Method"}),(0,N.jsx)("strong",{children:"Method : "}),_]}),(0,N.jsxs)(f.Z.Item,{children:[(0,N.jsx)("h2",{children:"Order Items"}),0===u.length?(0,N.jsx)(g.Z,{children:"Your Cart is Empty"}):(0,N.jsx)(f.Z,{variant:"flush",children:u.map((function(e,r){return(0,N.jsx)(f.Z.Item,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{md:1,children:(0,N.jsx)(j.Z,{src:"".concat("http://localhost:5000").concat(e.image),alt:e.name,fluid:!0,rounded:!0})}),(0,N.jsx)(x.Z,{children:(0,N.jsx)(v(),{href:"/product/".concat(e.productId),children:e.name})}),(0,N.jsxs)(x.Z,{md:4,children:[e.qty," x $",e.price," = $",e.qty*e.price]})]})},r)}))})]})]})}),(0,N.jsx)(x.Z,{md:4,children:(0,N.jsx)(p.Z,{children:(0,N.jsxs)(f.Z,{variant:"flush",children:[(0,N.jsx)(f.Z.Item,{children:(0,N.jsx)("h2",{children:"Order Summary"})}),(0,N.jsx)(f.Z.Item,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{children:"Items"}),(0,N.jsxs)(x.Z,{children:["$",C]})]})}),(0,N.jsx)(f.Z.Item,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{children:"Shipping"}),(0,N.jsxs)(x.Z,{children:["$",T]})]})}),(0,N.jsx)(f.Z.Item,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{children:"Tax"}),(0,N.jsxs)(x.Z,{children:["$",M]})]})}),(0,N.jsx)(f.Z.Item,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{children:"Total"}),(0,N.jsxs)(x.Z,{children:["$",q]})]})}),(0,N.jsx)(f.Z.Item,{children:E&&(0,N.jsx)(g.Z,{varient:"error",children:E.data.message})}),(0,N.jsx)(f.Z.Item,{children:(0,N.jsxs)(m.Z,{type:"button",className:"btn-block",disabled:0===u.length,onClick:J,style:{width:"100%"},children:[" ","Place Order"]})})]})})})]})]})},O=!0,P=function(){(0,d.I0)();var e=(0,i.useRouter)(),r=((0,d.v9)((function(e){return e.auth})).user,(0,d.v9)((function(e){return e.order}))),n=r.success,l=r.currentOrder;return(0,s.useEffect)((function(){n&&l&&e.push("/orders/".concat(null===l||void 0===l?void 0:l._id))}),[n,l]),(0,N.jsxs)(s.Fragment,{children:[(0,N.jsx)(t.default,{children:(0,N.jsx)("title",{children:"Stonkify | Order Summary"})}),(0,N.jsx)(c.Z,{children:(0,N.jsx)(_,{})}),";"]})}},1182:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/placeorder",function(){return n(9073)}])},2587:function(e,r,n){"use strict";function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}n.d(r,{Z:function(){return t}})},6835:function(e,r,n){"use strict";n.d(r,{Z:function(){return i}});var t=n(2937);function i(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,s=[],c=!0,d=!1;try{for(n=n.call(e);!(c=(t=n.next()).done)&&(s.push(t.value),!r||s.length!==r);c=!0);}catch(l){d=!0,i=l}finally{try{c||null==n.return||n.return()}finally{if(d)throw i}}return s}}(e,r)||(0,t.Z)(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2937:function(e,r,n){"use strict";n.d(r,{Z:function(){return i}});var t=n(2587);function i(e,r){if(e){if("string"===typeof e)return(0,t.Z)(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,t.Z)(e,r):void 0}}}},function(e){e.O(0,[969,774,888,179],(function(){return r=1182,e(e.s=r);var r}));var r=e.O();_N_E=r}]);